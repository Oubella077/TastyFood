!function(r,a){"object"==typeof exports&&"undefined"!=typeof module?module.exports=a():"function"==typeof define&&define.amd?define("keycloak",a):(r="undefined"!=typeof globalThis?globalThis:r||self).Keycloak=a()}(this,function(){"use strict";var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function getDefaultExportFromCjs(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function commonjsRequire(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var es6Promise_min={exports:{}},r;r=es6Promise_min,r.exports=function(){function e(n){return"function"==typeof n}function I(){var n=setTimeout;return function(){return n(U,1)}}function U(){for(var n=0;n<A;n+=2)(0,ee[n])(ee[n+1]),ee[n]=void 0,ee[n+1]=void 0;A=0}function T(n,l){var v=this,S=new this.constructor(O);void 0===S[ce]&&h(S);var b=v._state;if(b){var E=arguments[b-1];L(function(){return ne(b,S,E,v._result)})}else G(v,S,n,l);return S}function j(n){if(n&&"object"==typeof n&&n.constructor===this)return n;var v=new this(O);return z(v,n),v}function O(){}function Q(n,l,v){l.constructor===n.constructor&&v===T&&l.constructor.resolve===j?function x(n,l){l._state===ie?Y(n,l._result):l._state===re?N(n,l._result):G(l,void 0,function(v){return z(n,v)},function(v){return N(n,v)})}(n,l):void 0===v?Y(n,l):e(v)?function ae(n,l,v){L(function(S){var b=!1,E=function V(n,l,v,S){try{n.call(l,v,S)}catch(b){return b}}(v,l,function(D){b||(b=!0,l!==D?z(S,D):Y(S,D))},function(D){b||(b=!0,N(S,D))});!b&&E&&(b=!0,N(S,E))},n)}(n,l,v):Y(n,l)}function z(n,l){if(n===l)N(n,function X(){return new TypeError("You cannot resolve a promise with itself")}());else if(function m(n){var l=typeof n;return null!==n&&("object"===l||"function"===l)}(l)){var v=void 0;try{v=l.then}catch(S){return void N(n,S)}Q(n,l,v)}else Y(n,l)}function Z(n){n._onerror&&n._onerror(n._result),$(n)}function Y(n,l){n._state===te&&(n._result=l,n._state=ie,0!==n._subscribers.length&&L($,n))}function N(n,l){n._state===te&&(n._state=re,n._result=l,L(Z,n))}function G(n,l,v,S){var b=n._subscribers,E=b.length;n._onerror=null,b[E]=l,b[E+ie]=v,b[E+re]=S,0===E&&n._state&&L($,n)}function $(n){var l=n._subscribers,v=n._state;if(0!==l.length){for(var S=void 0,b=void 0,E=n._result,D=0;D<l.length;D+=3)b=l[D+v],(S=l[D])?ne(v,S,b,E):b(E);n._subscribers.length=0}}function ne(n,l,v,S){var b=e(v),E=void 0,D=void 0,oe=!0;if(b){try{E=v(S)}catch(se){oe=!1,D=se}if(l===E)return void N(l,function B(){return new TypeError("A promises callback cannot return that same promise.")}())}else E=S;l._state!==te||(b&&oe?z(l,E):!1===oe?N(l,D):n===ie?Y(l,E):n===re&&N(l,E))}function h(n){n[ce]=fe++,n._state=void 0,n._result=void 0,n._subscribers=[]}var M=Array.isArray?Array.isArray:function(n){return"[object Array]"===Object.prototype.toString.call(n)},A=0,F=void 0,q=void 0,L=function(n,l){ee[A]=n,ee[A+1]=l,2===(A+=2)&&(q?q(U):he())},W="undefined"!=typeof window?window:void 0,le=W||{},de=le.MutationObserver||le.WebKitMutationObserver,pe="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),me="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ee=new Array(1e3),he=void 0;he=pe?function w(){return function(){return process.nextTick(U)}}():de?function R(){var n=0,l=new de(U),v=document.createTextNode("");return l.observe(v,{characterData:!0}),function(){v.data=n=++n%2}}():me?function C(){var n=new MessageChannel;return n.port1.onmessage=U,function(){return n.port2.postMessage(0)}}():void 0===W&&"function"==typeof commonjsRequire?function H(){try{var n=Function("return this")().require("vertx");return F=n.runOnLoop||n.runOnContext,function g(){return void 0!==F?function(){F(U)}:I()}()}catch(l){return I()}}():I();var ce=Math.random().toString(36).substring(2),te=void 0,ie=1,re=2,fe=0,ve=function(){function n(l,v){this._instanceConstructor=l,this.promise=new l(O),this.promise[ce]||h(this.promise),M(v)?(this.length=v.length,this._remaining=v.length,this._result=new Array(this.length),0===this.length?Y(this.promise,this._result):(this.length=this.length||0,this._enumerate(v),0===this._remaining&&Y(this.promise,this._result))):N(this.promise,function f(){return new Error("Array Methods must be provided an Array")}())}return n.prototype._enumerate=function(l){for(var v=0;this._state===te&&v<l.length;v++)this._eachEntry(l[v],v)},n.prototype._eachEntry=function(l,v){var S=this._instanceConstructor,b=S.resolve;if(b===j){var E=void 0,D=void 0,oe=!1;try{E=l.then}catch(ue){oe=!0,D=ue}if(E===T&&l._state!==te)this._settledAt(l._state,v,l._result);else if("function"!=typeof E)this._remaining--,this._result[v]=l;else if(S===J){var se=new S(O);oe?N(se,D):Q(se,l,E),this._willSettleAt(se,v)}else this._willSettleAt(new S(function(ue){return ue(l)}),v)}else this._willSettleAt(b(l),v)},n.prototype._settledAt=function(l,v,S){var b=this.promise;b._state===te&&(this._remaining--,l===re?N(b,S):this._result[v]=S),0===this._remaining&&Y(b,this._result)},n.prototype._willSettleAt=function(l,v){var S=this;G(l,void 0,function(b){return S._settledAt(ie,v,b)},function(b){return S._settledAt(re,v,b)})},n}(),J=function(){function n(l){this[ce]=function o(){return fe++}(),this._result=this._state=void 0,this._subscribers=[],O!==l&&("function"!=typeof l&&function k(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof n?function t(n,l){try{l(function(v){z(n,v)},function(v){N(n,v)})}catch(v){N(n,v)}}(this,l):function _(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return n.prototype.catch=function(l){return this.then(null,l)},n.prototype.finally=function(l){var v=this,S=v.constructor;return e(l)?v.then(function(b){return S.resolve(l()).then(function(){return b})},function(b){return S.resolve(l()).then(function(){throw b})}):v.then(l,l)},n}();return J.prototype.then=T,J.all=function c(n){return new ve(this,n).promise},J.race=function p(n){var l=this;return new l(M(n)?function(v,S){for(var b=n.length,E=0;E<b;E++)l.resolve(n[E]).then(v,S)}:function(v,S){return S(new TypeError("You must pass an array to race."))})},J.resolve=j,J.reject=function s(n){var l=new this(O);return N(l,n),l},J._setScheduler=function u(n){q=n},J._setAsap=function d(n){L=n},J._asap=L,J.polyfill=function y(){var n=void 0;if(void 0!==commonjsGlobal)n=commonjsGlobal;else if("undefined"!=typeof self)n=self;else try{n=Function("return this")()}catch(S){throw new Error("polyfill failed because global object is unavailable in this environment")}var l=n.Promise;if(l){var v=null;try{v=Object.prototype.toString.call(l.resolve())}catch(S){}if("[object Promise]"===v&&!l.cast)return}n.Promise=J},J.Promise=J,J}();var es6Promise_minExports=es6Promise_min.exports,base64Js={};base64Js.byteLength=byteLength,base64Js.toByteArray=toByteArray,base64Js.fromByteArray=fromByteArray;for(var lookup=[],revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;function getLens(r){var a=r.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var m=r.indexOf("=");return-1===m&&(m=a),[m,m===a?0:4-m%4]}function byteLength(r){var a=getLens(r),e=a[1];return 3*(a[0]+e)/4-e}function _byteLength(r,a,m){return 3*(a+m)/4-m}function toByteArray(r){var a,m,e=getLens(r),u=e[0],d=e[1],w=new Arr(_byteLength(r,u,d)),g=0,R=d>0?u-4:u;for(m=0;m<R;m+=4)a=revLookup[r.charCodeAt(m)]<<18|revLookup[r.charCodeAt(m+1)]<<12|revLookup[r.charCodeAt(m+2)]<<6|revLookup[r.charCodeAt(m+3)],w[g++]=a>>16&255,w[g++]=a>>8&255,w[g++]=255&a;return 2===d&&(a=revLookup[r.charCodeAt(m)]<<2|revLookup[r.charCodeAt(m+1)]>>4,w[g++]=255&a),1===d&&(a=revLookup[r.charCodeAt(m)]<<10|revLookup[r.charCodeAt(m+1)]<<4|revLookup[r.charCodeAt(m+2)]>>2,w[g++]=a>>8&255,w[g++]=255&a),w}function tripletToBase64(r){return lookup[r>>18&63]+lookup[r>>12&63]+lookup[r>>6&63]+lookup[63&r]}function encodeChunk(r,a,m){for(var u=[],d=a;d<m;d+=3)u.push(tripletToBase64((r[d]<<16&16711680)+(r[d+1]<<8&65280)+(255&r[d+2])));return u.join("")}function fromByteArray(r){for(var a,m=r.length,e=m%3,u=[],d=16383,w=0,g=m-e;w<g;w+=d)u.push(encodeChunk(r,w,w+d>g?g:w+d));return 1===e?u.push(lookup[(a=r[m-1])>>2]+lookup[a<<4&63]+"=="):2===e&&u.push(lookup[(a=(r[m-2]<<8)+r[m-1])>>10]+lookup[a>>4&63]+lookup[a<<2&63]+"="),u.join("")}revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63;var sha256$1={exports:{}};(function(module){(function(){var ERROR="input is invalid type",WINDOW="object"==typeof window,root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&"object"==typeof self,NODE_JS=!root.JS_SHA256_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;NODE_JS?root=commonjsGlobal:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&module.exports,ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[];!root.JS_SHA256_NO_NODE_JS&&Array.isArray||(Array.isArray=function(r){return"[object Array]"===Object.prototype.toString.call(r)}),!ARRAY_BUFFER||!root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(r){return"object"==typeof r&&r.buffer&&r.buffer.constructor===ArrayBuffer});var createOutputMethod=function(r,a){return function(m){return new Sha256(a,!0).update(m)[r]()}},createMethod=function(r){var a=createOutputMethod("hex",r);NODE_JS&&(a=nodeWrap(a,r)),a.create=function(){return new Sha256(r)},a.update=function(u){return a.create().update(u)};for(var m=0;m<OUTPUT_TYPES.length;++m){var e=OUTPUT_TYPES[m];a[e]=createOutputMethod(e,r)}return a},nodeWrap=function(method,is224){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),algorithm=is224?"sha224":"sha256",nodeMethod=function(r){if("string"==typeof r)return crypto.createHash(algorithm).update(r,"utf8").digest("hex");if(null==r)throw new Error(ERROR);return r.constructor===ArrayBuffer&&(r=new Uint8Array(r)),Array.isArray(r)||ArrayBuffer.isView(r)||r.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(r)).digest("hex"):method(r)};return nodeMethod},createHmacOutputMethod=function(r,a){return function(m,e){return new HmacSha256(m,a,!0).update(e)[r]()}},createHmacMethod=function(r){var a=createHmacOutputMethod("hex",r);a.create=function(u){return new HmacSha256(u,r)},a.update=function(u,d){return a.create(u).update(d)};for(var m=0;m<OUTPUT_TYPES.length;++m){var e=OUTPUT_TYPES[m];a[e]=createHmacOutputMethod(e,r)}return a};function Sha256(r,a){a?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=r}function HmacSha256(r,a,m){var e,u=typeof r;if("string"===u){var d,w=[],g=r.length,R=0;for(e=0;e<g;++e)(d=r.charCodeAt(e))<128?w[R++]=d:d<2048?(w[R++]=192|d>>6,w[R++]=128|63&d):d<55296||d>=57344?(w[R++]=224|d>>12,w[R++]=128|d>>6&63,w[R++]=128|63&d):(d=65536+((1023&d)<<10|1023&r.charCodeAt(++e)),w[R++]=240|d>>18,w[R++]=128|d>>12&63,w[R++]=128|d>>6&63,w[R++]=128|63&d);r=w}else{if("object"!==u)throw new Error(ERROR);if(null===r)throw new Error(ERROR);if(ARRAY_BUFFER&&r.constructor===ArrayBuffer)r=new Uint8Array(r);else if(!(Array.isArray(r)||ARRAY_BUFFER&&ArrayBuffer.isView(r)))throw new Error(ERROR)}r.length>64&&(r=new Sha256(a,!0).update(r).array());var C=[],I=[];for(e=0;e<64;++e){var U=r[e]||0;C[e]=92^U,I[e]=54^U}Sha256.call(this,a,m),this.update(I),this.oKeyPad=C,this.inner=!0,this.sharedMemory=m}Sha256.prototype.update=function(r){if(!this.finalized){var a,m=typeof r;if("string"!==m){if("object"!==m)throw new Error(ERROR);if(null===r)throw new Error(ERROR);if(ARRAY_BUFFER&&r.constructor===ArrayBuffer)r=new Uint8Array(r);else if(!(Array.isArray(r)||ARRAY_BUFFER&&ArrayBuffer.isView(r)))throw new Error(ERROR);a=!0}for(var e,u,d=0,w=r.length,g=this.blocks;d<w;){if(this.hashed&&(this.hashed=!1,g[0]=this.block,g[16]=g[1]=g[2]=g[3]=g[4]=g[5]=g[6]=g[7]=g[8]=g[9]=g[10]=g[11]=g[12]=g[13]=g[14]=g[15]=0),a)for(u=this.start;d<w&&u<64;++d)g[u>>2]|=r[d]<<SHIFT[3&u++];else for(u=this.start;d<w&&u<64;++d)(e=r.charCodeAt(d))<128?g[u>>2]|=e<<SHIFT[3&u++]:e<2048?(g[u>>2]|=(192|e>>6)<<SHIFT[3&u++],g[u>>2]|=(128|63&e)<<SHIFT[3&u++]):e<55296||e>=57344?(g[u>>2]|=(224|e>>12)<<SHIFT[3&u++],g[u>>2]|=(128|e>>6&63)<<SHIFT[3&u++],g[u>>2]|=(128|63&e)<<SHIFT[3&u++]):(e=65536+((1023&e)<<10|1023&r.charCodeAt(++d)),g[u>>2]|=(240|e>>18)<<SHIFT[3&u++],g[u>>2]|=(128|e>>12&63)<<SHIFT[3&u++],g[u>>2]|=(128|e>>6&63)<<SHIFT[3&u++],g[u>>2]|=(128|63&e)<<SHIFT[3&u++]);this.lastByteIndex=u,this.bytes+=u-this.start,u>=64?(this.block=g[16],this.start=u-64,this.hash(),this.hashed=!0):this.start=u}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha256.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var r=this.blocks,a=this.lastByteIndex;r[16]=this.block,r[a>>2]|=EXTRA[3&a],this.block=r[16],a>=56&&(this.hashed||this.hash(),r[0]=this.block,r[16]=r[1]=r[2]=r[3]=r[4]=r[5]=r[6]=r[7]=r[8]=r[9]=r[10]=r[11]=r[12]=r[13]=r[14]=r[15]=0),r[14]=this.hBytes<<3|this.bytes>>>29,r[15]=this.bytes<<3,this.hash()}},Sha256.prototype.hash=function(){var r,a,m,e,u,d,w,g,R,C=this.h0,I=this.h1,U=this.h2,H=this.h3,T=this.h4,j=this.h5,O=this.h6,X=this.h7,B=this.blocks;for(r=16;r<64;++r)a=((u=B[r-15])>>>7|u<<25)^(u>>>18|u<<14)^u>>>3,m=((u=B[r-2])>>>17|u<<15)^(u>>>19|u<<13)^u>>>10,B[r]=B[r-16]+a+B[r-7]+m<<0;for(R=I&U,r=0;r<64;r+=4)this.first?(this.is224?(d=300032,X=(u=B[0]-1413257819)-150054599<<0,H=u+24177077<<0):(d=704751109,X=(u=B[0]-210244248)-1521486534<<0,H=u+143694565<<0),this.first=!1):(e=(d=C&I)^C&U^R,X=H+(u=X+(m=(T>>>6|T<<26)^(T>>>11|T<<21)^(T>>>25|T<<7))+(T&j^~T&O)+K[r]+B[r])<<0,H=u+((a=(C>>>2|C<<30)^(C>>>13|C<<19)^(C>>>22|C<<10))+e)<<0),e=(w=H&C)^H&I^d,O=U+(u=O+(m=(X>>>6|X<<26)^(X>>>11|X<<21)^(X>>>25|X<<7))+(X&T^~X&j)+K[r+1]+B[r+1])<<0,a=((U=u+((a=(H>>>2|H<<30)^(H>>>13|H<<19)^(H>>>22|H<<10))+e)<<0)>>>2|U<<30)^(U>>>13|U<<19)^(U>>>22|U<<10),e=(g=U&H)^U&C^w,j=I+(u=j+(m=(O>>>6|O<<26)^(O>>>11|O<<21)^(O>>>25|O<<7))+(O&X^~O&T)+K[r+2]+B[r+2])<<0,a=((I=u+(a+e)<<0)>>>2|I<<30)^(I>>>13|I<<19)^(I>>>22|I<<10),e=(R=I&U)^I&H^g,T=C+(u=T+(m=(j>>>6|j<<26)^(j>>>11|j<<21)^(j>>>25|j<<7))+(j&O^~j&X)+K[r+3]+B[r+3])<<0,C=u+(a+e)<<0;this.h0=this.h0+C<<0,this.h1=this.h1+I<<0,this.h2=this.h2+U<<0,this.h3=this.h3+H<<0,this.h4=this.h4+T<<0,this.h5=this.h5+j<<0,this.h6=this.h6+O<<0,this.h7=this.h7+X<<0},Sha256.prototype.hex=function(){this.finalize();var r=this.h0,a=this.h1,m=this.h2,e=this.h3,u=this.h4,d=this.h5,w=this.h6,g=this.h7,R=HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[15&r]+HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[15&a]+HEX_CHARS[m>>28&15]+HEX_CHARS[m>>24&15]+HEX_CHARS[m>>20&15]+HEX_CHARS[m>>16&15]+HEX_CHARS[m>>12&15]+HEX_CHARS[m>>8&15]+HEX_CHARS[m>>4&15]+HEX_CHARS[15&m]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[u>>28&15]+HEX_CHARS[u>>24&15]+HEX_CHARS[u>>20&15]+HEX_CHARS[u>>16&15]+HEX_CHARS[u>>12&15]+HEX_CHARS[u>>8&15]+HEX_CHARS[u>>4&15]+HEX_CHARS[15&u]+HEX_CHARS[d>>28&15]+HEX_CHARS[d>>24&15]+HEX_CHARS[d>>20&15]+HEX_CHARS[d>>16&15]+HEX_CHARS[d>>12&15]+HEX_CHARS[d>>8&15]+HEX_CHARS[d>>4&15]+HEX_CHARS[15&d]+HEX_CHARS[w>>28&15]+HEX_CHARS[w>>24&15]+HEX_CHARS[w>>20&15]+HEX_CHARS[w>>16&15]+HEX_CHARS[w>>12&15]+HEX_CHARS[w>>8&15]+HEX_CHARS[w>>4&15]+HEX_CHARS[15&w];return this.is224||(R+=HEX_CHARS[g>>28&15]+HEX_CHARS[g>>24&15]+HEX_CHARS[g>>20&15]+HEX_CHARS[g>>16&15]+HEX_CHARS[g>>12&15]+HEX_CHARS[g>>8&15]+HEX_CHARS[g>>4&15]+HEX_CHARS[15&g]),R},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var r=this.h0,a=this.h1,m=this.h2,e=this.h3,u=this.h4,d=this.h5,w=this.h6,g=this.h7,R=[r>>24&255,r>>16&255,r>>8&255,255&r,a>>24&255,a>>16&255,a>>8&255,255&a,m>>24&255,m>>16&255,m>>8&255,255&m,e>>24&255,e>>16&255,e>>8&255,255&e,u>>24&255,u>>16&255,u>>8&255,255&u,d>>24&255,d>>16&255,d>>8&255,255&d,w>>24&255,w>>16&255,w>>8&255,255&w];return this.is224||R.push(g>>24&255,g>>16&255,g>>8&255,255&g),R},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var r=new ArrayBuffer(this.is224?28:32),a=new DataView(r);return a.setUint32(0,this.h0),a.setUint32(4,this.h1),a.setUint32(8,this.h2),a.setUint32(12,this.h3),a.setUint32(16,this.h4),a.setUint32(20,this.h5),a.setUint32(24,this.h6),this.is224||a.setUint32(28,this.h7),r},HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){if(Sha256.prototype.finalize.call(this),this.inner){this.inner=!1;var r=this.array();Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(r),Sha256.prototype.finalize.call(this)}};var exports=createMethod();exports.sha256=exports,exports.sha224=createMethod(!0),exports.sha256.hmac=createHmacMethod(),exports.sha224.hmac=createHmacMethod(!0),COMMON_JS?module.exports=exports:(root.sha256=exports.sha256,root.sha224=exports.sha224)})()})(sha256$1);var sha256Exports=sha256$1.exports,sha256=getDefaultExportFromCjs(sha256Exports);if(void 0===es6Promise_minExports.Promise)throw Error("Keycloak requires an environment that supports Promises. Make sure that you include the appropriate polyfill.");var loggedConstructorDeprecation=!1;function logConstructorDeprecation(){loggedConstructorDeprecation||(loggedConstructorDeprecation=!0,console.warn("[KEYCLOAK] Instantiation using the `Keycloak` function has been deprecated and support will be removed in future versions. Use the `new` operator to create an instance instead."))}var loggedPromiseDeprecation=!1;function logPromiseDeprecation(){loggedPromiseDeprecation||(loggedPromiseDeprecation=!0,console.warn("[KEYCLOAK] Usage of legacy style promise methods such as `.error()` and `.success()` has been deprecated and support will be removed in future versions. Use standard style promise methods such as `.then() and `.catch()` instead."))}function Keycloak(r){if(!(this instanceof Keycloak))return logConstructorDeprecation(),new Keycloak(r);for(var a,m,e=this,u=[],d={enable:!0,callbackList:[],interval:5},w=document.getElementsByTagName("script"),g=0;g<w.length;g++)-1===w[g].src.indexOf("keycloak.js")&&-1===w[g].src.indexOf("keycloak.min.js")||-1===w[g].src.indexOf("version=")||(e.iframeVersion=w[g].src.substring(w[g].src.indexOf("version=")+8).split("&")[0]);var R=!0,C=ne(console.info),I=ne(console.warn);function U(t,o){for(var h=function(p){var s=null,k=window.crypto||window.msCrypto;if(k&&k.getRandomValues&&window.Uint8Array)return s=new Uint8Array(p),k.getRandomValues(s),s;s=new Array(p);for(var _=0;_<s.length;_++)s[_]=Math.floor(256*Math.random());return s}(t),f=new Array(t),c=0;c<t;c++)f[c]=o.charCodeAt(h[c]%o.length);return String.fromCharCode.apply(null,f)}function H(){return void 0!==e.authServerUrl?"/"==e.authServerUrl.charAt(e.authServerUrl.length-1)?e.authServerUrl+"realms/"+encodeURIComponent(e.realm):e.authServerUrl+"/realms/"+encodeURIComponent(e.realm):void 0}function T(t,o){var h=t.code,f=t.error,c=t.prompt,p=(new Date).getTime();if(t.kc_action_status&&e.onActionUpdate&&e.onActionUpdate(t.kc_action_status),f)if("none"!=c){var s={error:f,error_description:t.error_description};e.onAuthError&&e.onAuthError(s),o&&o.setError(s)}else o&&o.setSuccess();else if("standard"!=e.flow&&(t.access_token||t.id_token)&&P(t.access_token,null,t.id_token,!0),"implicit"!=e.flow&&h){var k="code="+h+"&grant_type=authorization_code",_=e.endpoints.token(),y=new XMLHttpRequest;y.open("POST",_,!0),y.setRequestHeader("Content-type","application/x-www-form-urlencoded"),k+="&client_id="+encodeURIComponent(e.clientId),k+="&redirect_uri="+t.redirectUri,t.pkceCodeVerifier&&(k+="&code_verifier="+t.pkceCodeVerifier),y.withCredentials=!0,y.onreadystatechange=function(){if(4==y.readyState)if(200==y.status){var M=JSON.parse(y.responseText);P(M.access_token,M.refresh_token,M.id_token,"standard"===e.flow),z()}else e.onAuthError&&e.onAuthError(),o&&o.setError()},y.send(k)}function P(M,A,F,q){O(M,A,F,p=(p+(new Date).getTime())/2),R&&(e.tokenParsed&&e.tokenParsed.nonce!=t.storedNonce||e.refreshTokenParsed&&e.refreshTokenParsed.nonce!=t.storedNonce||e.idTokenParsed&&e.idTokenParsed.nonce!=t.storedNonce)?(C("[KEYCLOAK] Invalid nonce, clearing token"),e.clearToken(),o&&o.setError()):q&&(e.onAuthSuccess&&e.onAuthSuccess(),o&&o.setSuccess())}}function j(t){return 0==t.status&&t.responseText&&t.responseURL.startsWith("file:")}function O(t,o,h,f){if(e.tokenTimeoutHandle&&(clearTimeout(e.tokenTimeoutHandle),e.tokenTimeoutHandle=null),o?(e.refreshToken=o,e.refreshTokenParsed=X(o)):(delete e.refreshToken,delete e.refreshTokenParsed),h?(e.idToken=h,e.idTokenParsed=X(h)):(delete e.idToken,delete e.idTokenParsed),t){if(e.token=t,e.tokenParsed=X(t),e.sessionId=e.tokenParsed.session_state,e.authenticated=!0,e.subject=e.tokenParsed.sub,e.realmAccess=e.tokenParsed.realm_access,e.resourceAccess=e.tokenParsed.resource_access,f&&(e.timeSkew=Math.floor(f/1e3)-e.tokenParsed.iat),null!=e.timeSkew&&(C("[KEYCLOAK] Estimated time difference between browser and server is "+e.timeSkew+" seconds"),e.onTokenExpired)){var c=1e3*(e.tokenParsed.exp-(new Date).getTime()/1e3+e.timeSkew);C("[KEYCLOAK] Token expires in "+Math.round(c/1e3)+" s"),c<=0?e.onTokenExpired():e.tokenTimeoutHandle=setTimeout(e.onTokenExpired,c)}}else delete e.token,delete e.tokenParsed,delete e.subject,delete e.realmAccess,delete e.resourceAccess,e.authenticated=!1}function X(t){switch((t=(t=(t=t.split(".")[1]).replace(/-/g,"+")).replace(/_/g,"/")).length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Invalid token"}return t=decodeURIComponent(escape(atob(t))),JSON.parse(t)}function B(){var t="0123456789abcdef",o=U(36,t).split("");return o[14]="4",o[19]=t.substr(3&o[19]|8,1),o[8]=o[13]=o[18]=o[23]="-",o.join("")}function V(t){var o=function(f){var c;switch(e.flow){case"standard":c=["code","state","session_state","kc_action_status"];break;case"implicit":c=["access_token","token_type","id_token","state","session_state","expires_in","kc_action_status"];break;case"hybrid":c=["access_token","token_type","id_token","code","state","session_state","expires_in","kc_action_status"]}c.push("error"),c.push("error_description"),c.push("error_uri");var p,s,k=f.indexOf("?"),_=f.indexOf("#");if("query"===e.responseMode&&-1!==k?(p=f.substring(0,k),""!==(s=ae(f.substring(k+1,-1!==_?_:f.length),c)).paramsString&&(p+="?"+s.paramsString),-1!==_&&(p+=f.substring(_))):"fragment"===e.responseMode&&-1!==_&&(p=f.substring(0,_),""!==(s=ae(f.substring(_+1),c)).paramsString&&(p+="#"+s.paramsString)),s&&s.oauthParams)if("standard"===e.flow||"hybrid"===e.flow){if((s.oauthParams.code||s.oauthParams.error)&&s.oauthParams.state)return s.oauthParams.newUrl=p,s.oauthParams}else if("implicit"===e.flow&&(s.oauthParams.access_token||s.oauthParams.error)&&s.oauthParams.state)return s.oauthParams.newUrl=p,s.oauthParams}(t);if(o){var h=m.get(o.state);return h&&(o.valid=!0,o.redirectUri=h.redirectUri,o.storedNonce=h.nonce,o.prompt=h.prompt,o.pkceCodeVerifier=h.pkceCodeVerifier),o}}function ae(t,o){for(var h=t.split("&"),f={paramsString:"",oauthParams:{}},c=0;c<h.length;c++){var p=h[c].indexOf("="),s=h[c].slice(0,p);-1!==o.indexOf(s)?f.oauthParams[s]=h[c].slice(p+1):(""!==f.paramsString&&(f.paramsString+="&"),f.paramsString+=h[c])}return f}function x(){var t={setSuccess:function(o){t.resolve(o)},setError:function(o){t.reject(o)}};return t.promise=new es6Promise_minExports.Promise(function(o,h){t.resolve=o,t.reject=h}),t.promise.success=function(o){return logPromiseDeprecation(),this.then(function(h){o(h)}),this},t.promise.error=function(o){return logPromiseDeprecation(),this.catch(function(h){o(h)}),this},t}function Q(){var t=x();if(!d.enable||d.iframe)return t.setSuccess(),t.promise;var o=document.createElement("iframe");d.iframe=o,o.onload=function(){var f=e.endpoints.authorize();d.iframeOrigin="/"===f.charAt(0)?window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""):f.substring(0,f.indexOf("/",8)),t.setSuccess()};var h=e.endpoints.checkSessionIframe();return o.setAttribute("src",h),o.setAttribute("title","keycloak-session-iframe"),o.style.display="none",document.body.appendChild(o),window.addEventListener("message",function(f){if(f.origin===d.iframeOrigin&&d.iframe.contentWindow===f.source&&("unchanged"==f.data||"changed"==f.data||"error"==f.data)){"unchanged"!=f.data&&e.clearToken();for(var c=d.callbackList.splice(0,d.callbackList.length),p=c.length-1;p>=0;--p){var s=c[p];"error"==f.data?s.setError():s.setSuccess("unchanged"==f.data)}}},!1),t.promise}function z(){d.enable&&e.token&&setTimeout(function(){Z().then(function(t){t&&z()})},1e3*d.interval)}function Z(){var t=x();if(d.iframe&&d.iframeOrigin){var o=e.clientId+" "+(e.sessionId?e.sessionId:"");d.callbackList.push(t),1==d.callbackList.length&&d.iframe.contentWindow.postMessage(o,d.iframeOrigin)}else t.setSuccess();return t.promise}function Y(){var f,c,s,k,t=x();if(d.enable||e.silentCheckSsoRedirectUri){var o=document.createElement("iframe");o.setAttribute("src",e.endpoints.thirdPartyCookiesIframe()),o.setAttribute("title","keycloak-3p-check-iframe"),o.style.display="none",document.body.appendChild(o);var h=function(f){o.contentWindow===f.source&&("supported"!==f.data&&"unsupported"!==f.data||("unsupported"===f.data&&(d.enable=!1,e.silentCheckSsoFallback&&(e.silentCheckSsoRedirectUri=!1),I("[KEYCLOAK] 3rd party cookies aren't supported by this browser. checkLoginIframe and silent check-sso are not available.")),document.body.removeChild(o),window.removeEventListener("message",h),t.setSuccess()))};window.addEventListener("message",h,!1)}else t.setSuccess();return f=t.promise,c=e.messageReceiveTimeout,s=null,k=new es6Promise_minExports.Promise(function(_,y){s=setTimeout(function(){y({error:"Timeout when waiting for 3rd party check iframe message."})},c)}),es6Promise_minExports.Promise.race([f,k]).finally(function(){clearTimeout(s)})}function N(t){if(!t||"default"==t)return{login:function(c){return window.location.assign(e.createLoginUrl(c)),x().promise},logout:function(c){return window.location.replace(e.createLogoutUrl(c)),x().promise},register:function(c){return window.location.assign(e.createRegisterUrl(c)),x().promise},accountManagement:function(){var c=e.createAccountUrl();if(void 0===c)throw"Not supported by the OIDC server";return window.location.href=c,x().promise},redirectUri:function(c,p){return c&&c.redirectUri?c.redirectUri:e.redirectUri?e.redirectUri:location.href}};if("cordova"==t){d.enable=!1;var o=function(c,p,s){return window.cordova&&window.cordova.InAppBrowser?window.cordova.InAppBrowser.open(c,p,s):window.open(c,p,s)},h=function(c){var s,p=(s=c)&&s.cordovaOptions?Object.keys(s.cordovaOptions).reduce(function(k,_){return k[_]=s.cordovaOptions[_],k},{}):{};return p.location="no",c&&"none"==c.prompt&&(p.hidden="yes"),function(s){return Object.keys(s).reduce(function(k,_){return k.push(_+"="+s[_]),k},[]).join(",")}(p)},f=e.redirectUri||"http://localhost";return{login:function(c){var p=x(),s=h(c),k=e.createLoginUrl(c),_=o(k,"_blank",s),y=!1,P=!1,M=function(){P=!0,_.close()};return _.addEventListener("loadstart",function(A){0==A.url.indexOf(f)&&(T(V(A.url),p),M(),y=!0)}),_.addEventListener("loaderror",function(A){y||(0==A.url.indexOf(f)?(T(V(A.url),p),M(),y=!0):(p.setError(),M()))}),_.addEventListener("exit",function(A){P||p.setError({reason:"closed_by_user"})}),p.promise},logout:function(c){var p,s=x(),k=e.createLogoutUrl(c),_=o(k,"_blank","location=no,hidden=yes,clearcache=yes");return _.addEventListener("loadstart",function(y){0==y.url.indexOf(f)&&_.close()}),_.addEventListener("loaderror",function(y){0==y.url.indexOf(f)||(p=!0),_.close()}),_.addEventListener("exit",function(y){p?s.setError():(e.clearToken(),s.setSuccess())}),s.promise},register:function(c){var p=x(),s=e.createRegisterUrl(),k=h(c),_=o(s,"_blank",k);return _.addEventListener("loadstart",function(y){0==y.url.indexOf(f)&&(_.close(),T(V(y.url),p))}),p.promise},accountManagement:function(){var c=e.createAccountUrl();if(void 0===c)throw"Not supported by the OIDC server";var p=o(c,"_blank","location=no");p.addEventListener("loadstart",function(s){0==s.url.indexOf(f)&&p.close()})},redirectUri:function(c){return f}}}if("cordova-native"==t)return d.enable=!1,{login:function(c){var p=x(),s=e.createLoginUrl(c);return universalLinks.subscribe("keycloak",function(k){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close(),T(V(k.url),p)}),window.cordova.plugins.browsertab.openUrl(s),p.promise},logout:function(c){var p=x(),s=e.createLogoutUrl(c);return universalLinks.subscribe("keycloak",function(k){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close(),e.clearToken(),p.setSuccess()}),window.cordova.plugins.browsertab.openUrl(s),p.promise},register:function(c){var p=x(),s=e.createRegisterUrl(c);return universalLinks.subscribe("keycloak",function(k){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close(),T(V(k.url),p)}),window.cordova.plugins.browsertab.openUrl(s),p.promise},accountManagement:function(){var c=e.createAccountUrl();if(void 0===c)throw"Not supported by the OIDC server";window.cordova.plugins.browsertab.openUrl(c)},redirectUri:function(c){return c&&c.redirectUri?c.redirectUri:e.redirectUri?e.redirectUri:"http://localhost"}};throw"invalid adapter type: "+t}e.init=function(t){if(e.authenticated=!1,m=function(){try{return new G}catch(s){}return new $}(),a=t&&["default","cordova","cordova-native"].indexOf(t.adapter)>-1?N(t.adapter):t&&"object"==typeof t.adapter?t.adapter:window.Cordova||window.cordova?N("cordova"):N(),t){if(void 0!==t.useNonce&&(R=t.useNonce),void 0!==t.checkLoginIframe&&(d.enable=t.checkLoginIframe),t.checkLoginIframeInterval&&(d.interval=t.checkLoginIframeInterval),"login-required"===t.onLoad&&(e.loginRequired=!0),t.responseMode){if("query"!==t.responseMode&&"fragment"!==t.responseMode)throw"Invalid value for responseMode";e.responseMode=t.responseMode}if(t.flow){switch(t.flow){case"standard":e.responseType="code";break;case"implicit":e.responseType="id_token token";break;case"hybrid":e.responseType="code id_token token";break;default:throw"Invalid value for flow"}e.flow=t.flow}if(null!=t.timeSkew&&(e.timeSkew=t.timeSkew),t.redirectUri&&(e.redirectUri=t.redirectUri),t.silentCheckSsoRedirectUri&&(e.silentCheckSsoRedirectUri=t.silentCheckSsoRedirectUri),e.silentCheckSsoFallback="boolean"!=typeof t.silentCheckSsoFallback||t.silentCheckSsoFallback,t.pkceMethod){if("S256"!==t.pkceMethod)throw"Invalid value for pkceMethod";e.pkceMethod=t.pkceMethod}e.enableLogging="boolean"==typeof t.enableLogging&&t.enableLogging,"string"==typeof t.scope&&(e.scope=t.scope),e.messageReceiveTimeout="number"==typeof t.messageReceiveTimeout&&t.messageReceiveTimeout>0?t.messageReceiveTimeout:1e4}e.responseMode||(e.responseMode="fragment"),e.responseType||(e.responseType="code",e.flow="standard");var o=x(),h=x();h.promise.then(function(){e.onReady&&e.onReady(e.authenticated),o.setSuccess(e.authenticated)}).catch(function(s){o.setError(s)});var f=function(s){var k,_=x();function y(L){e.endpoints=L?{authorize:function(){return L.authorization_endpoint},token:function(){return L.token_endpoint},logout:function(){if(!L.end_session_endpoint)throw"Not supported by the OIDC server";return L.end_session_endpoint},checkSessionIframe:function(){if(!L.check_session_iframe)throw"Not supported by the OIDC server";return L.check_session_iframe},register:function(){throw'Redirection to "Register user" page not supported in standard OIDC mode'},userinfo:function(){if(!L.userinfo_endpoint)throw"Not supported by the OIDC server";return L.userinfo_endpoint}}:{authorize:function(){return H()+"/protocol/openid-connect/auth"},token:function(){return H()+"/protocol/openid-connect/token"},logout:function(){return H()+"/protocol/openid-connect/logout"},checkSessionIframe:function(){var W=H()+"/protocol/openid-connect/login-status-iframe.html";return e.iframeVersion&&(W=W+"?version="+e.iframeVersion),W},thirdPartyCookiesIframe:function(){var W=H()+"/protocol/openid-connect/3p-cookies/step1.html";return e.iframeVersion&&(W=W+"?version="+e.iframeVersion),W},register:function(){return H()+"/protocol/openid-connect/registrations"},userinfo:function(){return H()+"/protocol/openid-connect/userinfo"}}}if(r?"string"==typeof r&&(k=r):k="keycloak.json",k)(A=new XMLHttpRequest).open("GET",k,!0),A.setRequestHeader("Accept","application/json"),A.onreadystatechange=function(){if(4==A.readyState)if(200==A.status||j(A)){var L=JSON.parse(A.responseText);e.authServerUrl=L["auth-server-url"],e.realm=L.realm,e.clientId=L.resource,y(null),_.setSuccess()}else _.setError()},A.send();else{if(!r.clientId)throw"clientId missing";e.clientId=r.clientId;var P=r.oidcProvider;if(P){var M,A;"string"==typeof P?(M="/"==P.charAt(P.length-1)?P+".well-known/openid-configuration":P+"/.well-known/openid-configuration",(A=new XMLHttpRequest).open("GET",M,!0),A.setRequestHeader("Accept","application/json"),A.onreadystatechange=function(){4==A.readyState&&(200==A.status||j(A)?(y(JSON.parse(A.responseText)),_.setSuccess()):_.setError())},A.send()):(y(P),_.setSuccess())}else{if(!r.url)for(var F=document.getElementsByTagName("script"),q=0;q<F.length;q++)if(F[q].src.match(/.*keycloak\.js/)){r.url=F[q].src.substr(0,F[q].src.indexOf("/js/keycloak.js"));break}if(!r.realm)throw"realm missing";e.authServerUrl=r.url,e.realm=r.realm,y(null),_.setSuccess()}}return _.promise}();function c(){var s=function(y){y||(_.prompt="none"),e.login(_).then(function(){h.setSuccess()}).catch(function(P){h.setError(P)})},k=function(){var y=document.createElement("iframe"),P=e.createLoginUrl({prompt:"none",redirectUri:e.silentCheckSsoRedirectUri});y.setAttribute("src",P),y.setAttribute("title","keycloak-silent-check-sso"),y.style.display="none",document.body.appendChild(y);var M=function(A){A.origin===window.location.origin&&y.contentWindow===A.source&&(T(V(A.data),h),document.body.removeChild(y),window.removeEventListener("message",M))};window.addEventListener("message",M)},_={};switch(t.onLoad){case"check-sso":d.enable?Q().then(function(){Z().then(function(y){y?h.setSuccess():e.silentCheckSsoRedirectUri?k():s(!1)}).catch(function(y){h.setError(y)})}):e.silentCheckSsoRedirectUri?k():s(!1);break;case"login-required":s(!0);break;default:throw"Invalid value for onLoad"}}function p(){var s=V(window.location.href);if(s&&window.history.replaceState(window.history.state,null,s.newUrl),s&&s.valid)return Q().then(function(){T(s,h)}).catch(function(k){h.setError(k)});t?t.token&&t.refreshToken?(O(t.token,t.refreshToken,t.idToken),d.enable?Q().then(function(){Z().then(function(k){k?(e.onAuthSuccess&&e.onAuthSuccess(),h.setSuccess(),z()):h.setSuccess()}).catch(function(k){h.setError(k)})}):e.updateToken(-1).then(function(){e.onAuthSuccess&&e.onAuthSuccess(),h.setSuccess()}).catch(function(k){e.onAuthError&&e.onAuthError(),t.onLoad?c():h.setError(k)})):t.onLoad?c():h.setSuccess():h.setSuccess()}return f.then(function(){var s,k;(s=x(),k=function(){"interactive"!==document.readyState&&"complete"!==document.readyState||(document.removeEventListener("readystatechange",k),s.setSuccess())},document.addEventListener("readystatechange",k),k(),s.promise).then(Y).then(p).catch(function(s){o.setError(s)})}),f.catch(function(s){o.setError(s)}),o.promise},e.login=function(t){return a.login(t)},e.createLoginUrl=function(t){var o,h=B(),f=B(),c=a.redirectUri(t),p={state:h,nonce:f,redirectUri:encodeURIComponent(c)};t&&t.prompt&&(p.prompt=t.prompt),o=t&&"register"==t.action?e.endpoints.register():e.endpoints.authorize();var s=t&&t.scope||e.scope;s?-1===s.indexOf("openid")&&(s="openid "+s):s="openid";var y=o+"?client_id="+encodeURIComponent(e.clientId)+"&redirect_uri="+encodeURIComponent(c)+"&state="+encodeURIComponent(h)+"&response_mode="+encodeURIComponent(e.responseMode)+"&response_type="+encodeURIComponent(e.responseType)+"&scope="+encodeURIComponent(s);if(R&&(y=y+"&nonce="+encodeURIComponent(f)),t&&t.prompt&&(y+="&prompt="+encodeURIComponent(t.prompt)),t&&t.maxAge&&(y+="&max_age="+encodeURIComponent(t.maxAge)),t&&t.loginHint&&(y+="&login_hint="+encodeURIComponent(t.loginHint)),t&&t.idpHint&&(y+="&kc_idp_hint="+encodeURIComponent(t.idpHint)),t&&t.action&&"register"!=t.action&&(y+="&kc_action="+encodeURIComponent(t.action)),t&&t.locale&&(y+="&ui_locales="+encodeURIComponent(t.locale)),t&&t.acr){var P=JSON.stringify({id_token:{acr:t.acr}});y+="&claims="+encodeURIComponent(P)}if(e.pkceMethod){var M=U(96,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789");p.pkceCodeVerifier=M,y+="&code_challenge="+function(F,q){if("S256"===F){var L=new Uint8Array(sha256.arrayBuffer(q));return base64Js.fromByteArray(L).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}throw"Invalid value for pkceMethod"}(e.pkceMethod,M),y+="&code_challenge_method="+e.pkceMethod}return m.add(p),y},e.logout=function(t){return a.logout(t)},e.createLogoutUrl=function(t){var o=e.endpoints.logout()+"?client_id="+encodeURIComponent(e.clientId)+"&post_logout_redirect_uri="+encodeURIComponent(a.redirectUri(t,!1));return e.idToken&&(o+="&id_token_hint="+encodeURIComponent(e.idToken)),o},e.register=function(t){return a.register(t)},e.createRegisterUrl=function(t){return t||(t={}),t.action="register",e.createLoginUrl(t)},e.createAccountUrl=function(t){var o=H(),h=void 0;return void 0!==o&&(h=o+"/account?referrer="+encodeURIComponent(e.clientId)+"&referrer_uri="+encodeURIComponent(a.redirectUri(t))),h},e.accountManagement=function(){return a.accountManagement()},e.hasRealmRole=function(t){var o=e.realmAccess;return!!o&&o.roles.indexOf(t)>=0},e.hasResourceRole=function(t,o){if(!e.resourceAccess)return!1;var h=e.resourceAccess[o||e.clientId];return!!h&&h.roles.indexOf(t)>=0},e.loadUserProfile=function(){var t=H()+"/account",o=new XMLHttpRequest;o.open("GET",t,!0),o.setRequestHeader("Accept","application/json"),o.setRequestHeader("Authorization","bearer "+e.token);var h=x();return o.onreadystatechange=function(){4==o.readyState&&(200==o.status?(e.profile=JSON.parse(o.responseText),h.setSuccess(e.profile)):h.setError())},o.send(),h.promise},e.loadUserInfo=function(){var t=e.endpoints.userinfo(),o=new XMLHttpRequest;o.open("GET",t,!0),o.setRequestHeader("Accept","application/json"),o.setRequestHeader("Authorization","bearer "+e.token);var h=x();return o.onreadystatechange=function(){4==o.readyState&&(200==o.status?(e.userInfo=JSON.parse(o.responseText),h.setSuccess(e.userInfo)):h.setError())},o.send(),h.promise},e.isTokenExpired=function(t){if(!e.tokenParsed||!e.refreshToken&&"implicit"!=e.flow)throw"Not authenticated";if(null==e.timeSkew)return C("[KEYCLOAK] Unable to determine if token is expired as timeskew is not set"),!0;var o=e.tokenParsed.exp-Math.ceil((new Date).getTime()/1e3)+e.timeSkew;if(t){if(isNaN(t))throw"Invalid minValidity";o-=t}return o<0},e.updateToken=function(t){var o=x();if(!e.refreshToken)return o.setError(),o.promise;t=t||5;var h=function(){var f=!1;if(-1==t?(f=!0,C("[KEYCLOAK] Refreshing token: forced refresh")):e.tokenParsed&&!e.isTokenExpired(t)||(f=!0,C("[KEYCLOAK] Refreshing token: token expired")),f){var c="grant_type=refresh_token&refresh_token="+e.refreshToken,p=e.endpoints.token();if(u.push(o),1==u.length){var s=new XMLHttpRequest;s.open("POST",p,!0),s.setRequestHeader("Content-type","application/x-www-form-urlencoded"),s.withCredentials=!0,c+="&client_id="+encodeURIComponent(e.clientId);var k=(new Date).getTime();s.onreadystatechange=function(){if(4==s.readyState)if(200==s.status){C("[KEYCLOAK] Token refreshed"),k=(k+(new Date).getTime())/2;var _=JSON.parse(s.responseText);O(_.access_token,_.refresh_token,_.id_token,k),e.onAuthRefreshSuccess&&e.onAuthRefreshSuccess();for(var y=u.pop();null!=y;y=u.pop())y.setSuccess(!0)}else for(I("[KEYCLOAK] Failed to refresh token"),400==s.status&&e.clearToken(),e.onAuthRefreshError&&e.onAuthRefreshError(),y=u.pop();null!=y;y=u.pop())y.setError(!0)},s.send(c)}}else o.setSuccess(!1)};return d.enable?Z().then(function(){h()}).catch(function(f){o.setError(f)}):h(),o.promise},e.clearToken=function(){e.token&&(O(null,null,null),e.onAuthLogout&&e.onAuthLogout(),e.loginRequired&&e.login())};var G=function(){if(!(this instanceof G))return new G;function t(){for(var o=(new Date).getTime(),h=0;h<localStorage.length;h++){var f=localStorage.key(h);if(f&&0==f.indexOf("kc-callback-")){var c=localStorage.getItem(f);if(c)try{var p=JSON.parse(c).expires;(!p||p<o)&&localStorage.removeItem(f)}catch(s){localStorage.removeItem(f)}}}}localStorage.setItem("kc-test","test"),localStorage.removeItem("kc-test"),this.get=function(o){if(o){var h="kc-callback-"+o,f=localStorage.getItem(h);return f&&(localStorage.removeItem(h),f=JSON.parse(f)),t(),f}},this.add=function(o){t();var h="kc-callback-"+o.state;o.expires=(new Date).getTime()+36e5,localStorage.setItem(h,JSON.stringify(o))}},$=function(){if(!(this instanceof $))return new $;var t=this;t.get=function(c){if(c){var p=h("kc-callback-"+c);return f("kc-callback-"+c,"",o(-100)),p?JSON.parse(p):void 0}},t.add=function(c){f("kc-callback-"+c.state,JSON.stringify(c),o(60))},t.removeItem=function(c){f(c,"",o(-100))};var o=function(c){var p=new Date;return p.setTime(p.getTime()+60*c*1e3),p},h=function(c){for(var p=c+"=",s=document.cookie.split(";"),k=0;k<s.length;k++){for(var _=s[k];" "==_.charAt(0);)_=_.substring(1);if(0==_.indexOf(p))return _.substring(p.length,_.length)}return""},f=function(c,p,s){var k=c+"="+p+"; expires="+s.toUTCString()+"; ";document.cookie=k}};function ne(t){return function(){e.enableLogging&&t.apply(console,Array.prototype.slice.call(arguments))}}}return Keycloak});